<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/layout}">
<head>
<meta charset="UTF-8">
<title>InOut</title>
<link rel="stylesheet"
	href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />
<script
	src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>


<style type="text/css">
.tui-datepicker {
	z-index: 1001;
}

.tui-select-box {
	z-index: 1001;
}

/* ul 스타일 */
.ul-style {
	list-style: none;
	padding: 0px;
}

.ul-style li>label {
	width: 100px;
	text-align: center;
}

.ul-style li {
	padding: 5px;
}
</style>
</head>
<body>
	<article layout:fragment="content">
		<main class="main" id="main">
			<h3>입고내역</h3>
			<div>
				<ul class="ul-style">
					<li><label>품목</label><input type="text" data-bs-toggle="modal"
						data-bs-target="#prtModal"> <i class="bi bi-search"
						data-bs-toggle="modal" data-bs-target="#prtModal"></i> <input
						type="text" readonly></li>
					<li><label>입고일</label>
						<div class="tui-datepicker-input tui-datetime-input tui-has-focus">
							<input type="text" id="datepicker-input" aria-label="Date-Time">
							<span class="tui-ico-date"></span>
							<div id="wrapper" style="margin-top: -1px;"></div>
						</div>
						<button class="button">등록</button>
						<button class="button">삭제</button></li>
				</ul>
				<div id="grid"></div>
			</div>


			<!-- prtModal -->
			<div class="modal fade" id="prtModal" tabindex="-1"
				aria-labelledby="prtModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-xl">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal"
								aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<div>
								<div id="prtGrid"></div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-bs-dismiss="modal">Close</button>
							<button type="button" class="btn btn-primary">Save
								changes</button>
						</div>
					</div>
				</div>
			</div>

			<script>
			matInList();
			
			//발주번호,자재코드,자재명,입고수량(합격수량),입고일,창고,LOT번호
				const grid = new tui.Grid({
					el : document.getElementById('grid'),
					bodyHeight: 500,
					rowHeaders : [ 'checkbox' ],
					scrollX : false,
					scrollY : true,
					columns : [ {
						header : 'LOT 번호',
						name : 'lotNo',
						align : 'center'
					},{
						header : '발주 번호',
						name : 'matOrdNo',
						align : 'center'
					}, {
						header : '자재 코드',
						name : 'matCode',
						align : 'center'
					}, {
						header : '자재명',
						name : 'matName',
						align : 'center'
					}, {
						header : '입고 수량',  //ㄱㅖ산
						name : 'matPassQty',
						align : 'center'
					}, {
						header : '입고일', 
						name : 'lotDate',
						align : 'center' 
					}, 
/* 					{
						header : '창고 코드',
						name : 'whCode',
						align : 'center'
					}, */ 
					{
						header : '창고',
						name : 'whName',
						align : 'center'
					}]
				});

				var datepicker = new tui.DatePicker('#wrapper', {
					date : new Date(),
					input : {
						element : '#datepicker-input',
						format : 'yyyy-MM-dd'
					}
				});
				
				/*------------
	            // 함수
	            ----------------*/
	            
	            function matInList(){
					$.ajax({
						url : '/matInList',
						dataType : "json",
						success : function(data) {
							grid.resetData(data);
							concole.log(data);
						},
						error : function(reject) {
							console.log(reject);
						}
					})
				}
				
	            /*------------
	            // 등록
	            ----------------*/
				

	            
			</script>
			<script>
				

				var prtGrid = new tui.Grid({
					el : document.getElementById('prtGrid'),
					bodyHeight : 200,
					data : [ {
						prtCode : 'PCT-001',
						prtName : '제품',
						prtStandard : '',
						prtUnit : '',
						prtPrice : ''
					} ],
					rowHeaders : [ 'checkbox' ],
					scrollX : false,
					scrollY : true,
					columns : [ {
						header : '제품코드',
						name : 'prtCode'
					}, {
						header : '제품명',
						name : 'prtName'
					}, {
						header : '규격',
						name : 'prtStandard'
					}, {
						header : '단위',
						name : 'prtUnit'
					}, {
						header : '금액',
						name : 'prtPrice'
					} ]
				});

				document.addEventListener('shown.bs.modal', function() {
					prtGrid.refreshLayout();
				}, '.modal');
			</script>
		</main>
	</article>
</body>
</html>