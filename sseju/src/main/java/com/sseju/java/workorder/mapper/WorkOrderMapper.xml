<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sseju.java.workorder.mapper.WorkOrderMapper">
	<!-- 전체조회 -->
	<select id="getWorkOrderList" resultType="woVO">
		SELECT *
		FROM produce
		ORDER BY preNo DESC
	</select>
	<!-- 단건조회 -->
	<select id="getSearchWorkOrder" parameterType="woVO" resultType="woVO">
		SELECT preNo,
			   preDate,
			   preManager,
			   instructionQty,
			   preQty,
			   prtCode,
			   oderNo,
			   prePrg
		FROM produce
		<where>
			<if test="preNo > 0"></if>
			preNo = ${preNO}
		</where>
	</select>
	<!-- 등록 -->
	<insert id="insertWorkOrder" parameterType="com.sseju.java.workorder.serivce.WorkOrderVO">
		INSERT INTO produce( preNo
						    ,preDate
						    ,preManager
						    ,instructionQty
						    ,preQty
						    ,prtCode
						    ,oderNo
						    ,prePrg)
				   VALUES( #{preNo}
						   ,#{preDate}
						   ,#{preManager}
						   ,#{instructionQty}
						   ,#{preQty}
						   ,#{prtCode}
						   ,#{oderNo}
						   ,#{prePrg})
	</insert>
	<!-- 수정 -->
	<update id="updateWorkOrder" parameterType="com.sseju.java.workorder.serivce.WorkOrderVO">
		UPDATE produce
		<set>
			preManager = #{preManager},
			instructionQty = #{instructionQty},
			preQty = #{preQty},
			prePrg = #{prePrg}
		</set>
		WHERE preNo = #{preNo}
	</update>
	
	<!-- 삭제 -->
	<delete id="deleteWorkOrder" parameterType="Integer">
		DELETE FROM produce
		WHERE preNo = #{preNo}
	</delete>
	
	<!-- 작업 지시 번호 조회 -->
	<select id="getWoNo" resultType="com.sseju.java.workorder.serivce.WorkOrderVO">
		SELECT NVL(MAX(preNo), 0) + 1 AS preNo
		FROM produce
	</select>
</mapper>